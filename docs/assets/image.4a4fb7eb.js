import{A as h,_ as X,q as i,g as Y,r as n,B as ee,C as M,o as u,b as g,w as o,a as s,d as t,p as D,y as te,c as V,F as ne,e as oe,D as I,h as ae,f as le,z as f,E as N}from"./index.39c418b0.js";import{c as se}from"./util.967435f9.js";const ce=()=>h.get("/api/image"),$=r=>h.delete("/api/image",{data:r}),ie=r=>h.post("/api/image",r),ue=r=>h.post("/api/resources/upload",r);const re={class:"top flex-space-between"},pe={class:"top-left"},de={class:"top-right"},_e={class:"input-button flex-space-between"},me={class:"mt-5"},fe={class:"actions flex-center"},ve=["onClick"],ge=["onClick"],he=["onClick"],ye={__name:"image",setup(r){const p=i([]),y=i(!1),U=i(0),k=i(!1),w=i(!1),d=i(""),_=i([]),z=Y(()=>p.value.map(e=>e.url));v();async function v(){y.value=!0;const e=await ce();p.value=e,y.value=!1}async function F(e){if(e.length){w.value=!0;const l=new FormData;for(let m=0;m<e.length;m++){const b=e[m];l.append("file",b)}const c=await ue(l);c&&(p.value.push(...c),f.success("\u4E0A\u4F20\u6210\u529F"),w.value=!1)}}async function K(e){await N.confirm("\u786E\u5B9A\u5220\u9664\u5417\uFF1F",{type:"warning"}),await $([e])&&(v(),f.success("\u5220\u9664\u6210\u529F"))}function A(e){U.value=e,k.value=!0}function P(e){se(e),f.success("\u590D\u5236\u6210\u529F")}async function B(){const e=await ie({url:d.value});e&&(d.value="",f.success("\u6DFB\u52A0\u6210\u529F"),p.value.push(e))}async function Z(){await N.confirm("\u786E\u5B9A\u5C06\u9009\u62E9\u7684\u6570\u636E\u5220\u9664",{type:"warning"}),await $(_.value)&&(_.value=[],v(),f.success("\u5220\u9664\u6210\u529F"))}return(e,l)=>{const c=n("el-button"),m=n("Uploader"),b=n("el-input"),q=n("el-image"),G=n("ZoomIn"),x=n("el-icon"),C=n("el-tooltip"),O=n("CopyDocument"),R=n("Delete"),T=n("el-checkbox"),j=n("el-space"),H=n("el-checkbox-group"),J=n("el-empty"),Q=n("el-image-viewer"),S=n("el-card"),L=ee("loading");return M((u(),g(S,{"element-loading-text":"\u4E0A\u4F20\u4E2D..."},{default:o(()=>[s("div",re,[s("div",pe,[t(m,{multiple:"",class:"d-inline-block mr-2",onChange:F},{default:o(()=>[t(c,{type:"primary",icon:"Upload"},{default:o(()=>[D("\u4E0A\u4F20")]),_:1})]),_:1}),t(c,{type:"danger",icon:"Delete",plain:"",disabled:_.value.length===0,onClick:Z},{default:o(()=>[D(" \u5220 \u9664 ")]),_:1},8,["disabled"])]),s("div",de,[t(c,{icon:"Refresh",circle:"",onClick:v})])]),s("div",_e,[t(b,{placeholder:"\u8F93\u5165\u56FE\u7247\u94FE\u63A5\u76F4\u63A5\u6DFB\u52A0",modelValue:d.value,"onUpdate:modelValue":l[0]||(l[0]=a=>d.value=a),modelModifiers:{trim:!0},clearable:"",size:"large",onKeydown:te(B,["native","enter"])},null,8,["modelValue","onKeydown"]),t(c,{onClick:B,type:"primary",disabled:d.value.length===0,size:"large"},{default:o(()=>[D("\u6DFB\u52A0")]),_:1},8,["disabled"])]),M((u(),V("div",me,[p.value.length>0?(u(),g(H,{key:0,modelValue:_.value,"onUpdate:modelValue":l[1]||(l[1]=a=>_.value=a)},{default:o(()=>[t(j,{wrap:""},{default:o(()=>[(u(!0),V(ne,null,oe(p.value,(a,W)=>(u(),V("div",{class:"file oh pr",key:a.id},[t(T,{label:a.id},{default:o(()=>[t(q,{src:a.url,fit:"cover"},null,8,["src"]),s("span",fe,[t(C,{effect:"dark",content:"\u653E\u5927",placement:"top"},{default:o(()=>[s("span",{onClick:I(E=>A(W),["prevent"])},[t(x,null,{default:o(()=>[t(G)]),_:1})],8,ve)]),_:2},1024),t(C,{effect:"dark",content:a.url,placement:"top"},{default:o(()=>[s("span",{onClick:I(E=>P(a.url),["prevent"])},[t(x,null,{default:o(()=>[t(O)]),_:1})],8,ge)]),_:2},1032,["content"]),t(C,{effect:"dark",content:"\u5220\u9664",placement:"top"},{default:o(()=>[s("span",{onClick:I(E=>K(a.id),["prevent"])},[t(x,null,{default:o(()=>[t(R)]),_:1})],8,he)]),_:2},1024)])]),_:2},1032,["label"])]))),128))]),_:1})]),_:1},8,["modelValue"])):(u(),g(J,{key:1,description:"\u6682\u65E0\u56FE\u7247"}))])),[[L,y.value]]),k.value?(u(),g(Q,{key:0,"url-list":ae(z),"initial-index":U.value,onClose:l[2]||(l[2]=a=>k.value=!1)},null,8,["url-list","initial-index"])):le("",!0)]),_:1})),[[L,w.value]])}}};var be=X(ye,[["__scopeId","data-v-ff862052"]]);export{be as default};
