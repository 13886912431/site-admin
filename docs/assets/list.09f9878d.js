import{g as v,d as k}from"./article.a5bf4ae1.js";import{f as w}from"./util.967435f9.js";import{q as d,x as C,r as i,o as r,b as m,w as n,c as D,a as x,p as u,d as A,t as B}from"./index.39c418b0.js";const L={key:0},R=["src"],P={__name:"list",setup(T){const l=d(!1),c=d([]),a=C({page:1,limit:10,total:0}),g={columns:[{label:"\u53D1\u5E03\u65F6\u95F4",formatter:e=>w(e.createdAt)},{label:"\u6807\u9898",prop:"title"},{label:"\u56FE\u7247",slot:"image"},{label:"\u63CF\u8FF0",prop:"description"},{label:"\u5206\u7C7B",slot:"classify"},{label:"\u6D4F\u89C8\u6B21\u6570",prop:"scanCount"},{label:"\u8BC4\u8BBA\u6B21\u6570",prop:"commentCount"}]};s();async function s(){if(l.value)return;l.value=!0;const e=await v({page:a.page,limit:a.limit});c.value=e.rows,a.total=e.total,l.value=!1}function f(){a.page=1,s()}async function _(e){await k(e.id)&&ElMessage.success("\u5220\u9664\u6210\u529F")}return(e,o)=>{const b=i("el-tag"),y=i("router-link"),h=i("ProTable");return r(),m(h,{data:c.value,loading:l.value,options:g,page:a,onAdd:o[0]||(o[0]=t=>e.$router.push("/article/add")),onDeleteRow:_,onEditRow:o[1]||(o[1]=t=>{e.$router.push(`/article/add?editId=${t.id}`)}),onChangePage:s,onChangeLimit:f,onRefresh:s},{image:n(({row:t})=>[t.image?(r(),D("div",L,[x("img",{src:t.image,style:{"max-width":"150px",width:"100%"}},null,8,R)])):(r(),m(b,{key:1,size:"small",type:"info"},{default:n(()=>[u("\u6CA1\u6709\u56FE\u7247")]),_:1}))]),classify:n(({row:t})=>[A(y,{to:"/article/classify",class:"el-link el-link--primary is-underline"},{default:n(()=>{var p;return[u(B((p=t.classify)==null?void 0:p.name),1)]}),_:2},1024)]),_:1},8,["data","loading","page"])}}};export{P as default};
